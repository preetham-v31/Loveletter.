<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Prema Lekha ðŸ’Œ</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Dancing+Script&display=swap');

  /* Reset & basics */
  * {
    box-sizing: border-box;
  }

  body, html {
    margin: 0; padding: 0;
    height: 100%;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: linear-gradient(270deg, #ffdde1, #ee9ca7, #ffdde1);
    background-size: 600% 600%;
    animation: gradientShift 30s ease infinite;
    color: #2f2f2f;
    overflow-x: hidden;
  }

  @keyframes gradientShift {
    0% {background-position:0% 50%;}
    50% {background-position:100% 50%;}
    100% {background-position:0% 50%;}
  }

  /* Opening page */
  #openingPage {
    position: fixed;
    inset: 0;
    background: linear-gradient(135deg, #fce4ec, #f8bbd0);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 9999;
    flex-direction: column;
    cursor: pointer;
    user-select: none;
  }

  #openingPage h2 {
    font-family: 'Dancing Script', cursive;
    font-size: 3.5rem;
    color: #d63384;
    margin-bottom: 30px;
    text-shadow:
      0 0 8px #ff79c6,
      0 0 15px #ff48c4,
      0 0 20px #ff1eaa;
    animation: glow 2.5s ease-in-out infinite alternate;
  }

  /* Realistic CSS bow */
  .bow {
    position: relative;
    width: 180px;
    height: 120px;
  }
  .bow .loop {
    position: absolute;
    top: 20px;
    width: 70px;
    height: 70px;
    background: linear-gradient(135deg, #ff4da6, #e60073);
    border-radius: 60% 40% 40% 60% / 50% 60% 40% 50%;
    box-shadow:
      0 0 15px #ff79c6,
      0 0 25px #ff48c4,
      0 0 30px #ff1eaa;
    transform-origin: center;
    transition: transform 0.3s ease;
  }
  .bow .loop.left {
    left: 0;
    transform: rotate(-25deg);
  }
  .bow .loop.right {
    right: 0;
    transform: rotate(25deg);
  }
  .bow .knot {
    position: absolute;
    top: 45px;
    left: 50%;
    width: 50px;
    height: 50px;
    background: radial-gradient(circle, #e60073 60%, #b20057);
    border-radius: 50%;
    box-shadow:
      0 0 20px #ff1eaa,
      inset 0 0 12px #ff79c6;
    transform: translateX(-50%);
  }
  .bow:hover .loop.left {
    transform: rotate(-15deg) scale(1.15);
  }
  .bow:hover .loop.right {
    transform: rotate(15deg) scale(1.15);
  }
  .bow:hover .knot {
    box-shadow:
      0 0 35px #ff1eaa,
      inset 0 0 20px #ff79c6;
  }

  /* Fade out animation */
  .fadeOut {
    animation: fadeOut 1s forwards;
  }
  @keyframes fadeOut {
    to {opacity: 0; visibility: hidden;}
  }

  @keyframes glow {
    from {
      text-shadow:
        0 0 8px #ff79c6,
        0 0 15px #ff48c4,
        0 0 20px #ff1eaa;
    }
    to {
      text-shadow:
        0 0 20px #ff79c6,
        0 0 25px #ff48c4,
        0 0 35px #ff1eaa;
    }
  }

  /* Main container */
  .container {
    max-width: 800px;
    background-color: #fff0f5cc;
    margin: 60px auto 80px;
    border-radius: 18px;
    padding: 40px 30px;
    box-shadow: 0 12px 40px rgba(230, 0, 90, 0.25);
    position: relative;
    z-index: 2;
    opacity: 0;
    animation: fadeIn 2.5s ease forwards 1s;
    display: none; /* hidden initially */
  }
  @keyframes fadeIn {
    to {opacity: 1;}
  }

  .letter {
    white-space: pre-wrap;
    line-height: 1.9;
    font-size: 1.15rem;
    margin-bottom: 40px;
    font-family: 'Georgia', serif;
    color: #442244;
  }

  .buttons {
    text-align: center;
  }
  button {
    background: #ff48c4;
    color: white;
    border: none;
    padding: 14px 36px;
    margin: 12px;
    font-size: 1.3rem;
    font-weight: 600;
    border-radius: 30px;
    cursor: pointer;
    box-shadow:
      0 0 10px #ff79c6,
      0 0 20px #ff48c4,
      0 0 30px #ff1eaa;
    position: relative;
    overflow: hidden;
    transition: 0.3s ease;
  }
  button:hover {
    background: #ff1eaa;
  }

  /* Heart container with upward flowing text */
  .heart-floating-container {
    position: fixed;
    bottom: -180px;
    left: 50%;
    transform: translateX(-50%);
    width: 150px;
    height: 150px;
    pointer-events: none;
    z-index: 3;
    overflow: visible;
  }

  /* Animate continuous upward scroll */
  .scroll-text {
    font-family: 'Dancing Script', cursive;
    font-size: 2.8rem;
    font-weight: 700;
    color: #ff48c4;
    text-shadow: 0 0 8px #ff79c6, 0 0 12px #ff48c4;
    white-space: nowrap;
    animation: scrollUp 8s linear infinite;
    user-select: none;
  }
  /* repeated text for smooth loop */
  .scroll-text span {
    margin: 0 10px;
  }

  @keyframes scrollUp {
    0% {transform: translateY(100%);}
    100% {transform: translateY(-100%);}
  }

  /* SVG heart container */
  .heart-svg-container {
    position: absolute;
    bottom: 0;
    left: 50%;
    transform: translateX(-50%);
    width: 150px;
    height: 150px;
    pointer-events: none;
    z-index: 4;
    filter: drop-shadow(0 0 5px #ff48c4);
  }

  /* Sparkles around heart */
  .sparkle {
    position: absolute;
    width: 6px;
    height: 6px;
    background: #fff0ff;
    box-shadow:
      0 0 8px 2px #ff79c6,
      0 0 10px 4px #ff48c4;
    border-radius: 50%;
    filter: drop-shadow(0 0 6px #ff79c6);
    animation: sparkleAnim 3s ease-in-out infinite;
    opacity: 0.8;
  }
  @keyframes sparkleAnim {
    0%, 100% {opacity: 0.8; transform: scale(1);}
    50% {opacity: 0; transform: scale(1.7);}
  }

  /* Confetti container */
  #confetti-container {
    pointer-events: none;
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    z-index: 10000;
    overflow: visible;
  }

  /* Responsive adjustments */
  @media (max-width: 600px) {
    .container {
      margin: 40px 20px 60px;
      padding: 30px 20px;
    }
    #openingPage h2 {
      font-size: 2.8rem;
    }
    .bow {
      width: 140px;
      height: 90px;
    }
  }
</style>
</head>
<body>
  <!-- Opening Page -->
  <div id="openingPage" role="dialog" aria-modal="true" aria-label="Opening page with bow, click to open letter">
    <h2>For My Ammulu ðŸ’–</h2>
    <div class="bow" aria-label="Click the bow to open the letter" role="button" tabindex="0">
      <div class="loop left"></div>
      <div class="loop right"></div>
      <div class="knot"></div>
    </div>
    <p style="color:#d63384; margin-top:20px; font-style: italic;">Click the bow to open your letter</p>
  </div>

  <!-- Main Letter Content -->
  <div class="container" role="main" aria-label="Romantic proposal letter">
    <div class="letter" id="letter">
snehitha snehitha snehitha ooo snehitha,
Ninnu choodinappati nunchi naa manasu nee pere palukuthunnadhi adhi nee thappa naa thappa ani teliyadam ledhu naaku. Nee vaipu choosthe chaalu nee andhamayna kallatho badinchesthav emi sankellu vesi?
Nuvvu roju ala andham ga navvuthu nee valalao padesukuntunnav jagratha mari padipothanemo, padipothe mathram adhi nee thappe mari.
Naaku nuvvu prema kaadhu, nuvve prema. Naa choopulalo naa oopurilo naa repati kalalo lo kooda antha nuvve untunnav. Nidhrapoyetappudu ninne choosthu padukuntunna roju..ela ani sandeha paduthunnava adhe chandamama ni choosthu padukuntunna. Nee raakatho naa jeevitham lo nedu repu ellundu motham nuvve aypoyav alane maa inti gadapathokki velugulani testhav nee navvutho tho mana intlo inka naa jeevitham lo anukuntunna,idhi mathram em sandeham ledhu tecchesthav nuvvu naaku telusu.
Naa prema ni eppudu accept chesthunnav, nenu ekanga neetho pelli mandapam lo thaali kaduthu mana pillalatho oka chinni kutumbam ni oohinchesukuntunna...naa gurinchi cheptha vinu nenu chaala manchodini, bad habits em lev, future planning antava business cheddham anukuntunna ninnu pelli chesukoni neetho sarasalu aaduthu mana buddodi muddi kaduguthu kooda oohinchesukunna okok wait future planning lo extreme ki vellipoya next nee gurinchi naaku em telusu antava nee andham tho kattesukunnav mundhu tarvatha nee navvu tho aakattukunnav inka getti mudi vesesav inka nee care choosaka nuvve naa pellam ank fix aypoya mari nannu nee mogudiga accept chesthava.
I love you so much as deep as the pacific ocean.
Ninnu puvvullo pettukoni choosukunta ey kastam raakunda choosukunta ani kaburlu cheppanu. Kottukundham, godavapadadham aypoyaka avi inka ekkuvaga preminchukundham kudirithe konni maatalu ledha musugulo dhoori muddhulu. Ups and downs common evari life lo ayna entha down lo unna odhileyanu, entha paiki vellina life lo neethone veltha odhileyanu nee chitikina velu mathram, okkasari nenu naadhi naa vallu ani commit aythe odhileyanu eppatiki. Nuvvu premani isthe adhi rettimpu chesi istha, koppani isthe adhi premaga marchi muddhuga tirigi istha, alaka choopisthe muddhu aadi naa vodilo padukopettukunta. Mari naatho paatu naa venta vasthava naatho yedu adugulu vesthava adhe...naa premanu angeekaristhava, so ninnu naa pellam/emey/oi/osey/ammulu..inka chaala vidhaluga prema ga piliche chanuvuni isthava mari...
Prema ga rasthunna lekha naa oopirini icchina snehitha ku 
Preetham.V 
Taruvatha nuvvu edhi anukunte adhi.
    </div>
    <div class="buttons" role="group" aria-label="Response buttons">
      <button class="yes" aria-label="Yes button" id="yesBtn">Yes ðŸ’–</button>
      <button class="yes" aria-label="Yes Yes button" id="yesYesBtn">Yes Yes ðŸ’˜</button>
      <button id="downloadBtn" aria-label="Download letter as PDF">Download PDF ðŸ“„</button>
    </div>
  </div>

  <!-- Heart with flowing Ammulu text -->
  <div class="heart-floating-container" aria-hidden="true" aria-label="Decorative heart with Ammulu text">
    <svg class="heart-svg-container" viewBox="0 0 32 29.6" aria-hidden="true" focusable="false">
      <path fill="#ff48c4" d="M23.6,0c-2.9,0-5.4,1.8-6.6,4.3C15.8,1.8,13.3,0,10.4,0C4.7,0,0,4.7,0,10.4
        c0,6.1,6.7,11.5,16,19.2c9.3-7.7,16-13.1,16-19.2C32,4.7,27.3,0,23.6,0z"/>
    </svg>
    <div class="scroll-text" aria-label="Flowing Ammulu text">
      <span>Ammulu</span><span>Ammulu</span><span>Ammulu</span><span>Ammulu</span><span>Ammulu</span><span>Ammulu</span>
    </div>

    <!-- Sparkles -->
    <div class="sparkle" style="top: 30px; left: 40px; animation-delay: 0s;"></div>
    <div class="sparkle" style="top: 100px; left: 90px; animation-delay: 1.2s;"></div>
    <div class="sparkle" style="top: 60px; left: 20px; animation-delay: 2.3s;"></div>
    <div class="sparkle" style="top: 120px; left: 60px; animation-delay: 0.8s;"></div>
    <div class="sparkle" style="top: 50px; left: 110px; animation-delay: 1.8s;"></div>
  </div>

  <!-- Confetti container -->
  <div id="confetti-container"></div>

  <!-- Audio sources - tested royalty free romantic tracks -->
  <audio id="yesMusic" preload="auto">
    <source src="https://cdn.pixabay.com/download/audio/2022/07/19/audio_f5a9c247b3.mp3?filename=romantic-piano-5575.mp3" type="audio/mp3" />
  </audio>

  <audio id="yesYesMusic" preload="auto">
    <source src="https://cdn.pixabay.com/download/audio/2022/08/24/audio_4e50979db9.mp3?filename=romantic-guitar-7785.mp3" type="audio/mp3" />
  </audio>

<script>
  const openingPage = document.getElementById('openingPage');
  const container = document.querySelector('.container');
  const bow = document.querySelector('.bow');

  function openLetter() {
    openingPage.classList.add('fadeOut');
    setTimeout(() => {
      openingPage.style.display = 'none';
      container.style.display = 'block';
      container.style.opacity = 0;
      container.animate([{opacity: 0}, {opacity: 1}], {duration: 2500, fill: 'forwards'});
      playYesMusic();
    }, 1000);
  }

  bow.addEventListener('click', openLetter);
  bow.addEventListener('keydown', e => {
    if(e.key === 'Enter' || e.key === ' ') {
      e.preventDefault();
      openLetter();
    }
  });

  const yesBtn = document.getElementById('yesBtn');
  const yesYesBtn = document.getElementById('yesYesBtn');
  const downloadBtn = document.getElementById('downloadBtn');
  const yesMusic = document.getElementById('yesMusic');
  const yesYesMusic = document.getElementById('yesYesMusic');

  function playYesMusic() {
    // Play yes music softly at start, paused after bow click
    yesMusic.volume = 0.2;
    yesMusic.play().catch(() => {});
  }

  function playConfettiAndMusic(button) {
    // Play corresponding music and confetti burst
    if (button === 'yes') {
      yesYesMusic.pause();
      yesMusic.currentTime = 0;
      yesMusic.volume = 0.7;
      yesMusic.play();
    } else if (button === 'yesYes') {
      yesMusic.pause();
      yesYesMusic.currentTime = 0;
      yesYesMusic.volume = 0.7;
      yesYesMusic.play();
    }
    confettiBurst();
  }

  yesBtn.addEventListener('click', () => playConfettiAndMusic('yes'));
  yesYesBtn.addEventListener('click', () => playConfettiAndMusic('yesYes'));

  // Confetti implementation
  function confettiBurst() {
    const container = document.getElementById('confetti-container');
    for(let i=0; i<100; i++) {
      const confetti = document.createElement('div');
      confetti.style.position = 'absolute';
      confetti.style.width = confetti.style.height = Math.random() * 8 + 6 + 'px';
      confetti.style.backgroundColor = `hsl(${Math.random()*360}, 100%, 70%)`;
      confetti.style.top = '50%';
      confetti.style.left = '50%';
      confetti.style.borderRadius = '3px';
      confetti.style.opacity = 1;
      confetti.style.pointerEvents = 'none';
      confetti.style.zIndex = 10000;
      confetti.style.transform = `translate(-50%, -50%) rotate(${Math.random()*360}deg)`;
      container.appendChild(confetti);

      // Animate confetti burst outwards
      const angle = Math.random() * 2 * Math.PI;
      const radius = 150 + Math.random() * 100;
      const x = Math.cos(angle) * radius;
      const y = Math.sin(angle) * radius;

      confetti.animate([
        {transform: `translate(-50%, -50%) rotate(${Math.random()*360}deg)`, opacity: 1},
        {transform: `translate(calc(-50% + ${x}px), calc(-50% + ${y}px)) rotate(${Math.random()*720}deg)`, opacity: 0}
      ], {
        duration: 2000 + Math.random() * 1000,
        easing: 'ease-out',
        fill: 'forwards'
      });

      setTimeout(() => container.removeChild(confetti), 3000);
    }
  }

  // Download letter as PDF
  downloadBtn.addEventListener('click', () => {
    // Use html2canvas and jsPDF for PDF generation (load libraries dynamically)
    if (!window.jsPDF) {
      loadScripts([
        'https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js',
        'https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js'
      ], generatePDF);
    } else {
      generatePDF();
    }
  });

  function loadScripts(urls, callback) {
    let loaded = 0;
    urls.forEach(url => {
      const script = document.createElement('script');
      script.src = url;
      script.onload = () => {
        loaded++;
        if (loaded === urls.length) callback();
      };
      document.body.appendChild(script);
    });
  }

  async function generatePDF() {
    const { jsPDF } = window.jspdf;
    const letterDiv = document.getElementById('letter');
    const canvas = await html2canvas(letterDiv, {scale: 2});
    const imgData = canvas.toDataURL('image/png');
    const pdf = new jsPDF({
      orientation: 'portrait',
      unit: 'px',
      format: [canvas.width, canvas.height]
    });
    pdf.addImage(imgData, 'PNG', 0, 0, canvas.width, canvas.height);
    pdf.save('prema_lekha.pdf');
  }

</script>
</body>
</html>

